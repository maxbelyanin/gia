zabbix_export:
  version: '6.0'
  date: '2022-06-04T13:07:20Z'
  groups:
    -
      uuid: 45c5f38a92f84f30ade6904d35f2da71
      name: Templates/GIA
  templates:
    -
      uuid: 18d83fc228904100ad154b17f46d83db
      template: AVS
      name: AVS
      groups:
        -
          name: Templates/GIA
      items:
        -
          uuid: b2ebb33207ab4bdcb5cf4e6b2545f6f6
          name: 'Check AVS Monitoring RTSP'
          type: HTTP_AGENT
          key: avs.monitoring.rtsp
          trends: '0'
          value_type: TEXT
          authtype: BASIC
          username: '{$AVS_SYSTEM_USER_NAME}'
          password: '{$AVS_SYSTEM_USER_PASS}'
          url: '{$AVS_URL_MONITORING_RTSP}'
          tags:
            -
              tag: software
              value: avs
          triggers:
            -
              uuid: 0f3a4770f8514f3cb27fadebb7c98994
              expression: change(/AVS/avs.monitoring.rtsp)=0
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: change(/AVS/avs.monitoring.rtsp)=1
              name: 'Static Response: {$AVS_URL_MONITORING_RTSP}'
              priority: DISASTER
              dependencies:
                -
                  name: 'Unresponsible: {$AVS_URL_MONITORING_RTSP}'
                  expression: 'nodata(/AVS/avs.monitoring.rtsp,2m)=1'
                  recovery_expression: 'nodata(/AVS/avs.monitoring.rtsp,1m)=0'
            -
              uuid: f21b0596623747aabec892dfaadae1db
              expression: 'nodata(/AVS/avs.monitoring.rtsp,2m)=1'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'nodata(/AVS/avs.monitoring.rtsp,1m)=0'
              name: 'Unresponsible: {$AVS_URL_MONITORING_RTSP}'
              priority: DISASTER
        -
          uuid: 47dbf82c51f4421dbeb75ce03349b393
          name: 'Check AVS Monitoring RTSP. Results'
          type: DEPENDENT
          key: avs.monitoring.rtsp.results
          delay: '0'
          history: 1d
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value).results;
                  var result = new Object({})
                    
                  for (var i in x) {
                    if(x[i]["online"]) {
                      c = i.substr(0,4) + "_" + x[i]["title"].substr(2,4) + "_" + x[i]["title"].substr(7) + "_" + i.substr(5)
                      result[c] = {
                        code:         c,
                        id:           i,
                        name:         x[i].title,
                        comment:      x[i].comment,
                        creationTime: new Date(x[i].creationTimestamp).toLocaleString(),
                        upTime:       x[i].upTime,
                        appname:      x[i].appname,
                        ip:           x[i].ip,
                        type:         x[i].type,
                        audio:        x[i].audio,
                        video:        x[i].video,
                        pullSettings: x[i].pullSettings
                      }
                    }
                  }
                    
                  return JSON.stringify(result)
          master_item:
            key: avs.monitoring.rtsp
          tags:
            -
              tag: avs
              value: monitoring
            -
              tag: software
              value: avs
        -
          uuid: 82c6cebd1809432da80a802c04d70e05
          name: 'Check AVS Monitoring Sys'
          type: HTTP_AGENT
          key: avs.monitoring.sys
          trends: '0'
          value_type: TEXT
          authtype: BASIC
          username: '{$AVS_SYSTEM_USER_NAME}'
          password: '{$AVS_SYSTEM_USER_PASS}'
          url: '{$AVS_URL_MONITORING_SYS}'
          tags:
            -
              tag: software
              value: avs
          triggers:
            -
              uuid: 1dbf0d5051f54878abd13d6aa3211d9e
              expression: 'nodata(/AVS/avs.monitoring.sys,2m)=1'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'nodata(/AVS/avs.monitoring.sys,1m)=0'
              name: 'Unresponsible: {$AVS_URL_MONITORING_SYS}'
              priority: DISASTER
        -
          uuid: 7e1709426358420394ad651415eab5c7
          name: 'Check AVS Monitoring Sys. AVS Version'
          type: DEPENDENT
          key: avs.monitoring.sys.avsVersion
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.avsVersion
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 8ee6739ff9c747f0909ddc864e7cf7cb
          name: 'Check AVS Monitoring Sys. Cams. All'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_all
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_all
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 16e2b49076944dd79e6bf4fc73d4a1a3
          name: 'Check AVS Monitoring Sys. Cams. Proxy. Off'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_off
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_off
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 5616c7f58e0342cbb3f4ceec92319d51
          name: 'Check AVS Monitoring Sys. Cams. Proxy. On'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_on
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_on
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 387f4496c15341b29d46f876445dd7d2
          name: 'Check AVS Monitoring Sys. Cams. Proxy. Waiting'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_waiting
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_waiting
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: d29f8e27ef33425aa38aee9d2de97a25
          name: 'Check AVS Monitoring Sys. Cams. Rec. Off'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_off
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_off
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 9a35b9b3f2be45b7a01a2b886e9e59d5
          name: 'Check AVS Monitoring Sys. Cams. Rec. On'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_on
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_on
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 330aa23dc50c4cecbb0d5b6a96de075f
          name: 'Check AVS Monitoring Sys. Cams. Rec. Waiting'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_waiting
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_waiting
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 0bff38a38e59437caa426cbf341ed8bd
          name: 'Check AVS Monitoring Sys. Cam List'
          type: DEPENDENT
          key: avs.monitoring.sys.cam_dist
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value).cam_list;
                  var result = new Object({})
                    
                  for (var i in x) {
                    c = i.substr(0,4) + "_" + x[i]["name"].substr(2,4) + "_" + x[i]["name"].substr(7) + "_" + i.substr(5)
                    result[c] = {
                      code:      c,
                      id:        i,
                      name:      x[i].name,
                      comment:   x[i].comment,
                      remoteUrl: x[i].remoteUrl,
                      playUrl:   x[i].playUrl,
                      pull:     (x[i].pull == "") ? "{$AVS_STREAM_STATUS_OFF}" : x[i].pull,
                      push:     (x[i].push == "") ? "{$AVS_STREAM_STATUS_OFF}" : x[i].push,
                      rec:      (x[i].rec  == "") ? "{$AVS_STREAM_STATUS_OFF}" : x[i].rec,
                    }
                  }
                    
                  return JSON.stringify(result)
                  
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 1fa549a49da747a4a8643ac2e6a02bdf
          name: 'Check AVS Monitoring Sys. Free Space'
          type: DEPENDENT
          key: avs.monitoring.sys.freeSpace
          delay: '0'
          units: B
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.freeSpace
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: f2ee6ba932254730b0b1755b799bde90
          name: 'Check AVS Monitoring Sys. Name'
          type: DEPENDENT
          key: avs.monitoring.sys.name
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.name
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 344b968c518c4cb9b3b3420205bfce74
          name: 'Get Involved Auditoriums Today'
          type: DEPENDENT
          key: gia.get.involved_auds.today
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // Get involved cam list today
                  var v = JSON.parse(value)
                  var d = new Date()
                  //var s = d.getFullYear() + "-" + ("00" + (d.getMonth() + 1)).substr(-2) + "-" + ("00" + d.getDate()).substr(-2)
                  var s = "2022-06-01"
                  var result = {
                    "data": {
                      "{\$GIA_INVOLVED_AUDS_TODAY}": {
                        "value": "[]"
                      },
                      "{\$GIA_INVOLVED_EXAM_TODAY}": {
                        "value": "NO"
                      }
                    }
                  }
                  if (v.hasOwnProperty(s)) {
                    result["data"]["{\$GIA_INVOLVED_AUDS_TODAY}"]["value"] = JSON.stringify(v[s])
                    result["data"]["{\$GIA_INVOLVED_EXAM_TODAY}"]["value"] = "YES"
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_AUDS_TODAY}",
                                  "{\$GIA_INVOLVED_EXAM_TODAY}"
                              ]
                          }
                      },
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                  }
                  var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    var r = JSON.parse(response)["result"]
                    for (var i in r) {
                      result["data"][r[i]["macro"]]["hostmacroid"] = r[i]["hostmacroid"]
                    }
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  for (var i in result["data"]) {
                    var request = new HttpRequest();
                    request.addHeader("Content-Type: application/json-rpc");
                    var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": result["data"][i],
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                    }
                  
                    var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                    if (200 != request.getStatus()) {
                      result["err"] = JSON.stringify(response);
                      return result;
                    }
                  }
                  result = result["data"]["{\$GIA_INVOLVED_AUDS_TODAY}"]["value"]
                  return result
          master_item:
            key: gia.get.involved_exam_days
          tags:
            -
              tag: gia
              value: scheduler
        -
          uuid: 9a637738609049e89eb6781b5d3735e4
          name: 'Get Involved Auditoriums Tomorrow'
          type: DEPENDENT
          key: gia.get.involved_auds.tomorrow
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // Get involved cam list tomorrow
                  var v = JSON.parse(value)
                  var d = new Date(new Date().getTime() + 86400000)
                  var s = d.getFullYear() + "-" + ("00" + (d.getMonth() + 1)).substr(-2) + "-" + ("00" + d.getDate()).substr(-2)
                  var result = {
                    "data": {
                      "{\$GIA_INVOLVED_AUDS_TOMORROW}": {
                        "value": "[]"
                      },
                      "{\$GIA_INVOLVED_EXAM_TOMORROW}": {
                        "value": "NO"
                      }
                    }
                  }
                  if (v.hasOwnProperty(s)) {
                    result["data"]["{\$GIA_INVOLVED_AUDS_TOMORROW}"]["value"] = JSON.stringify(v[s])
                    result["data"]["{\$GIA_INVOLVED_EXAM_TOMORROW}"]["value"] = "YES"
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_AUDS_TOMORROW}",
                                  "{\$GIA_INVOLVED_EXAM_TOMORROW}"
                              ]
                          }
                      },
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                  }
                  var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    var r = JSON.parse(response)["result"]
                    for (var i in r) {
                      result["data"][r[i]["macro"]]["hostmacroid"] = r[i]["hostmacroid"]
                    }
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  for (var i in result["data"]) {
                    var request = new HttpRequest();
                    request.addHeader("Content-Type: application/json-rpc");
                    var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": result["data"][i],
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                    }
                  
                    var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                    if (200 != request.getStatus()) {
                      result["err"] = JSON.stringify(response);
                      return result;
                    }
                  }
                  result = result["data"]["{\$GIA_INVOLVED_AUDS_TOMORROW}"]["value"]
                  return result
          master_item:
            key: gia.get.involved_exam_days
          tags:
            -
              tag: gia
              value: scheduler
        -
          uuid: e1b433b7af0c4dca9390ac713ccef6a3
          name: 'Get Involved Auditoriums Total'
          type: DEPENDENT
          key: gia.get.involved_auds.total
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[?(@.PPECode==''{$GIA_PPE_CODE}'')]'
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // Create Total involved aud list
                  v = JSON.parse(value)
                  var s = ["0000", "7777"]
                  for (var i in v) {
                    if(s.indexOf(v[i]["AudienceCode"]) >= 0) continue;  
                    s.push(v[i]["AudienceCode"])
                  }
                  
                  var result = {
                    "value": JSON.stringify(s.sort())
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_AUDS_TOTAL}"
                              ]
                          }
                      },
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                  }
                  var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result["hostmacroid"] = JSON.parse(response)["result"][0]["hostmacroid"]
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": JSON.parse(value),
                      "auth":"{$GIA_ZABBIX_API_TOKEN}","id":1
                  }
                  
                  var response = request.post("{$GIA_ZABBIX_API_URL}", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result = result["value"]
                  }
                  
                  return result
          master_item:
            key: gia.get.scheduler
          tags:
            -
              tag: gia
              value: scheduler
        -
          uuid: ddf08b17e56741388417c2baf7fe5c21
          name: 'Get Involved Exam Days'
          type: DEPENDENT
          key: gia.get.involved_exam_days
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[?(@.PPECode==''{$GIA_PPE_CODE}'')]'
            -
              type: JAVASCRIPT
              parameters:
                - |
                  v = JSON.parse(value)
                  const result = {}
                  for (var i in v) {
                    var dat = v[i]["Date"]
                    var aud = v[i]["AudienceCode"]
                    if (!result.hasOwnProperty(dat)) { result[dat] = {"0000": [1,0], "7777": [1, 0]} }
                    result[dat][aud] = [Number(v[i]["Online"]), Number(v[i]["OVZ"])]
                  }
                  return JSON.stringify(result)
          master_item:
            key: gia.get.scheduler
          tags:
            -
              tag: gia
              value: service
        -
          uuid: ccb0f634854f400f93334cead18bdd12
          name: 'Get Scheduler'
          type: HTTP_AGENT
          key: gia.get.scheduler
          trends: '0'
          value_type: TEXT
          timeout: 5s
          url: '{$GIA_SCHEDULER_URL}'
          tags:
            -
              tag: gia
              value: scheduler
      discovery_rules:
        -
          uuid: f0f25db4c9f14a8e90f36dce68d53d21
          name: 'Discovery AVS Cam list'
          type: DEPENDENT
          key: avs.discovery.cam_list
          delay: '0'
          lifetime: '0'
          item_prototypes:
            -
              uuid: ab68f0b415734fe8aa7cc337e009513b
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". Involved Today to Exam'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      // Check if IP-cam is Involved
                      if ("" == value) return "NO"
                      //var cam_list = JSON.parse(value)
                      //var cam = '{#AVS_STREAM_ZBX_ID}'
                      var aud = '{#AVS_STREAM_ZBX_ID}'.match("([0-9]{4})_([0-9]{4})_([0-9]{1})_([0-9]{1,2})")[2]
                      
                      return (JSON.parse(value).hasOwnProperty(aud)) ? "YES" : "NO"
              master_item:
                key: gia.get.involved_auds.today
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: exam
                  value: today
                -
                  tag: gia
                  value: exam
            -
              uuid: b047b8baafe74df2ba8577a791f70c77
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". Involved Tomorrow to Exam'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.tomorrow]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      // Check if IP-cam is Involved
                      if ("" == value) return "NO"
                      //var cam_list = JSON.parse(value)
                      //var cam = '{#AVS_STREAM_ZBX_ID}'
                      var aud = '{#AVS_STREAM_ZBX_ID}'.match("([0-9]{4})_([0-9]{4})_([0-9]{1})_([0-9]{1,2})")[2]
                      
                      return (JSON.parse(value).hasOwnProperty(aud)) ? "YES" : "NO"
              master_item:
                key: gia.get.involved_auds.tomorrow
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: exam
                  value: tomorrow
                -
                  tag: gia
                  value: exam
            -
              uuid: 82e13960c3c24997b75167605479186b
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". Pull Status (Local View)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},pull]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].pull'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: status
            -
              uuid: f3a053e6afd34f7eb438124a795980ab
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". Push Status (Translation)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},push]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].push'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: status
            -
              uuid: e09d9206428a4a07bcc5276bebb43523
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". Rec Status (Recording)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].rec'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: status
            -
              uuid: 3c717a4615d24f75833920457908605c
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Audio Bytes. Dropped (Delta)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.drop.delta]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
              master_item:
                key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.drop]'
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: audio
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
                -
                  tag: stream
                  value: drop
            -
              uuid: 5f13f9d9fbb64216b659d3f3142a30e4
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Audio Bytes. Dropped'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.drop]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].audio.droppedBytesCount'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: audio
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
                -
                  tag: stream
                  value: drop
            -
              uuid: 14d13a5079f549c6bd94861ec16b6e1c
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Audio Bytes. Sended (Byte rate)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.send.bitrate]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.send]'
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: audio
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: byterate
                -
                  tag: stream
                  value: codec
            -
              uuid: 4c372b4cc6d0402bbc17697d27d61870
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Audio Bytes. Sended'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.a.byte.send]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].audio.bytesCount'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: audio
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
            -
              uuid: 3d7504e651c3401fa793d09356afbd3f
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Audio Codec'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.acodec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].audio.codec'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: audio
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
            -
              uuid: 19c950bc7b0f4cc586205ec7e69de4f5
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Video Bytes. Dropped (Delta)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.drop.delta]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
              master_item:
                key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.drop]'
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: video
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
                -
                  tag: stream
                  value: drop
            -
              uuid: b613f2f8df054fc48e80a7c6c9d58beb
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Video Bytes. Dropped'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.drop]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].video.droppedBytesCount'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: video
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
                -
                  tag: stream
                  value: drop
            -
              uuid: e70406cec81f40d0b42437f3d5559249
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Video Bytes. Sended (Byte rate)'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.send.bitrate]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: CHANGE_PER_SECOND
                  parameters:
                    - ''
              master_item:
                key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.send]'
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: video
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: byterate
                -
                  tag: stream
                  value: codec
            -
              uuid: d039c54a968a44a592ed106521950cf2
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Video Bytes. Sended'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.v.byte.send]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].video.bytesCount'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: video
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
            -
              uuid: 9241075c773b40c3bc93d522b9935fb4
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". RTSP Video Codec'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.vcodec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].video.codec'
                  error_handler: DISCARD_VALUE
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: codec
                  value: video
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: codec
            -
              uuid: e2f5579cc0a04350a26dec6ebe4e504a
              name: 'AVS Stream ID: "{#AVS_STREAM_ZBX_ID}". UpTime'
              type: DEPENDENT
              key: 'avs.stream.[{#AVS_STREAM_ZBX_ID},uptime]'
              delay: '0'
              value_type: FLOAT
              units: s
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVS_STREAM_ZBX_ID}''].upTime'
                  error_handler: DISCARD_VALUE
                -
                  type: MULTIPLIER
                  parameters:
                    - '0.001'
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: avs
                  value: stream
                -
                  tag: gia
                -
                  tag: software
                  value: avs
                -
                  tag: stream
                  value: uptime
          trigger_prototypes:
            -
              uuid: 1adc25c8a6524380b4a8916af29e55fb
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"SWITCHEDOFF"  and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"RUNNING"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="RUNNING" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL BACKOFF'
              priority: DISASTER
              tags:
                -
                  tag: exam
                  value: today
            -
              uuid: eb1cb494e3d54a11b6b97209aaad97fb
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
              priority: DISASTER
              tags:
                -
                  tag: avs_cam_action
                  value: push_on
                -
                  tag: avs_cam_action
                  value: rec_on
                -
                  tag: avs_cam_id
                  value: '{#AVSCAMCODE}'
                -
                  tag: exam
                  value: today
            -
              uuid: 6c9595c761374b56990fe0ee6c0f76d3
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF" and {$GIA_INVOLVED_PPE_TODAY}="NO"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" or ({$GIA_INVOLVED_PPE_TODAY}="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO")'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
              priority: WARNING
            -
              uuid: eaa6466045b34866a67f378c07fbe7a2
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#2)<>"SWITCHEDOFF"  and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#2)<>"RUNNING"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#1)="SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#1)="RUNNING" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". PUSH BACKOFF'
              priority: DISASTER
              dependencies:
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL BACKOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"SWITCHEDOFF"  and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"RUNNING"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="RUNNING" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              tags:
                -
                  tag: exam
                  value: today
            -
              uuid: 78196cff0a2a48ababdc62dc76572ddb
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#1)="SWITCHEDOFF"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},push],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". PUSH SWITCHEDOFF'
              priority: DISASTER
              dependencies:
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              tags:
                -
                  tag: exam
                  value: today
            -
              uuid: f404bf1eca6041cba1da601bf8054f52
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#2)<>"SWITCHEDOFF"  and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#2)<>"RUNNING"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#1)="SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#1)="RUNNING" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". REC BACKOFF'
              priority: DISASTER
              dependencies:
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL BACKOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"SWITCHEDOFF"  and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#2)<>"RUNNING"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="RUNNING" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              tags:
                -
                  tag: exam
                  value: today
            -
              uuid: 7d51b61fe28743949f827410b6fc802a
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#1)="SWITCHEDOFF"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rec],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". REC SWITCHEDOFF'
              priority: DISASTER
              dependencies:
                -
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". PULL SWITCHEDOFF'
                  expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)="SWITCHEDOFF"'
                  recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},pull],#1)<>"SWITCHEDOFF" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              tags:
                -
                  tag: exam
                  value: today
            -
              uuid: 6fe046d4b43147c098df1213818a9dee
              expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.acodec],#2)="AUNK" and last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.acodec],#1)<>"AUNK" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP AUNK'
              priority: DISASTER
              tags:
                -
                  tag: avs_cam_action
                  value: pull_off
                -
                  tag: avs_cam_action
                  value: push_on
                -
                  tag: avs_cam_action
                  value: rec_off
                -
                  tag: avs_cam_action
                  value: rec_on
                -
                  tag: avs_cam_id
                  value: '{#AVSCAMCODE}'
                -
                  tag: exam
                  value: today
            -
              uuid: a554b3f32ef14ce9823c51e9a61cc853
              expression: |
                last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="YES"
                and
                last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.vcodec],#1)="VUNK"
                and
                countunique(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.vcodec],#2)=1
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},rtsp.vcodec],#1)<>"VUNK" or last(/AVS/avs.stream.[{#AVS_STREAM_ZBX_ID},involved.exam.today],#1)="NO"'
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP VUNK'
              priority: DISASTER
              tags:
                -
                  tag: avs_cam_action
                  value: pull_off
                -
                  tag: avs_cam_action
                  value: push_on
                -
                  tag: avs_cam_action
                  value: rec_off
                -
                  tag: avs_cam_action
                  value: rec_on
                -
                  tag: avs_cam_id
                  value: '{#AVSCAMCODE}'
                -
                  tag: exam
                  value: today
          master_item:
            key: avs.monitoring.sys.cam_dist
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value);
                  var result = []
                    
                  for (var i in x) {
                    result.push({
                      "{#AVS_STREAM_ZBX_ID}": x[i].code
                    })
                  }
                    
                  return JSON.stringify(result)
      tags:
        -
          tag: gia
        -
          tag: software
          value: avs
      macros:
        -
          macro: '{$AVS_STREAM_STATUS_BACKOFF}'
          value: BACKOFF
        -
          macro: '{$AVS_STREAM_STATUS_MISSING}'
          value: MISSING
        -
          macro: '{$AVS_STREAM_STATUS_OFF}'
          value: SWITCHEDOFF
        -
          macro: '{$AVS_STREAM_STATUS_ON}'
          value: RUNNING
        -
          macro: '{$AVS_STREAM_STATUS_STARTING}'
          value: STARTING
        -
          macro: '{$AVS_SYSTEM_USER_NAME}'
          value: monitoring
        -
          macro: '{$AVS_SYSTEM_USER_PASS}'
          value: Vjybnjhbyu
        -
          macro: '{$AVS_URL_MONITORING_PULL}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/pull'
        -
          macro: '{$AVS_URL_MONITORING_PULL_DEL}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/pull/del'
        -
          macro: '{$AVS_URL_MONITORING_REC}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/rec'
        -
          macro: '{$AVS_URL_MONITORING_REC_DEL}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/rec/del'
        -
          macro: '{$AVS_URL_MONITORING_RTSP}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/rtsp'
        -
          macro: '{$AVS_URL_MONITORING_SYS}'
          value: 'http://monitoring:Vjybnjhbyu@localhost/monitoring/sys'
        -
          macro: '{$GIA_SCHEDULER_URL}'
          value: 'http://11.103.8.101:8080/api/calendar/all'
        -
          macro: '{$GIA_ZABBIX_API_TOKEN}'
          value: 999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd
        -
          macro: '{$GIA_ZABBIX_API_URL}'
          value: 'http://11.103.8.101:62929/api_jsonrpc.php'
