zabbix_export:
  version: '6.0'
  date: '2022-06-01T15:53:16Z'
  groups:
    -
      uuid: cc825539265b4ae3b1a53d72b65a1483
      name: GIA
    -
      uuid: aeeab3d998ad4d0fbdc8bebad30ff971
      name: 'GIA. AVS Hosts'
  templates:
    -
      uuid: 18d83fc228904100ad154b17f46d83db
      template: 'GIA Template. AVS'
      name: 'GIA Template. AVS'
      groups:
        -
          name: GIA
        -
          name: 'GIA. AVS Hosts'
      items:
        -
          uuid: b2ebb33207ab4bdcb5cf4e6b2545f6f6
          name: 'Check AVS Monitoring RTSP'
          type: HTTP_AGENT
          key: avs.monitoring.rtsp
          history: '0'
          trends: '0'
          value_type: TEXT
          authtype: BASIC
          username: monitoring
          password: Vjybnjhbyu
          url: 'http://localhost/monitoring/rtsp'
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 0a96dd287eae4838bee74f0cd11ad07b
          name: 'Check AVS Monitoring RTSP. Num Results'
          type: DEPENDENT
          key: avs.monitoring.rtsp.num_results
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.num_results
          master_item:
            key: avs.monitoring.rtsp
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 47dbf82c51f4421dbeb75ce03349b393
          name: 'Check AVS Monitoring RTSP. Results'
          type: DEPENDENT
          key: avs.monitoring.rtsp.results
          delay: '0'
          history: 1d
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value).results;
                  var result = new Object({})
                    
                  for (var i in x) {
                    c = i.substr(0,4) + "_" + x[i]["title"].substr(2,4) + "_" + x[i]["title"].substr(7)
                    result[c] = {
                      code:         c,
                      id:           i,
                      name:         x[i].title,
                      comment:      x[i].comment,
                      creationTime: new Date(x[i].creationTimestamp).toLocaleString(),
                      upTime:       x[i].upTime,
                      appname:      x[i].appname,
                      ip:           x[i].ip,
                      type:         x[i].type,
                      online:       x[i].onine,
                      audio:        x[i].audio,
                      video:        x[i].video,
                      pullSettings: x[i].pullSettings
                    }
                  }
                    
                  return JSON.stringify(result)
          master_item:
            key: avs.monitoring.rtsp
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 82c6cebd1809432da80a802c04d70e05
          name: 'Check AVS Monitoring Sys'
          type: HTTP_AGENT
          key: avs.monitoring.sys
          history: '0'
          trends: '0'
          value_type: TEXT
          authtype: BASIC
          username: monitoring
          password: Vjybnjhbyu
          url: 'http://localhost/monitoring/sys'
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 7e1709426358420394ad651415eab5c7
          name: 'Check AVS Monitoring Sys. AVS Version'
          type: DEPENDENT
          key: avs.monitoring.sys.avsVersion
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.avsVersion
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 8ee6739ff9c747f0909ddc864e7cf7cb
          name: 'Check AVS Monitoring Sys. Cams. All'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_all
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_all
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 16e2b49076944dd79e6bf4fc73d4a1a3
          name: 'Check AVS Monitoring Sys. Cams. Proxy. Off'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_off
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_off
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 5616c7f58e0342cbb3f4ceec92319d51
          name: 'Check AVS Monitoring Sys. Cams. Proxy. On'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_on
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_on
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 387f4496c15341b29d46f876445dd7d2
          name: 'Check AVS Monitoring Sys. Cams. Proxy. Waiting'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_proxy_waiting
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_proxy_waiting
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: d29f8e27ef33425aa38aee9d2de97a25
          name: 'Check AVS Monitoring Sys. Cams. Rec. Off'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_off
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_off
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 9a35b9b3f2be45b7a01a2b886e9e59d5
          name: 'Check AVS Monitoring Sys. Cams. Rec. On'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_on
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_on
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 330aa23dc50c4cecbb0d5b6a96de075f
          name: 'Check AVS Monitoring Sys. Cams. Rec. Waiting'
          type: DEPENDENT
          key: avs.monitoring.sys.cams.cam_rec_waiting
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.cams.cam_rec_waiting
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 0bff38a38e59437caa426cbf341ed8bd
          name: 'Check AVS Monitoring Sys. Cam List'
          type: DEPENDENT
          key: avs.monitoring.sys.cam_dist
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value).cam_list;
                  var result = new Object({})
                    
                  for (var i in x) {
                    c = i.substr(0,4) + "_" + x[i]["name"].substr(2,4) + "_" + x[i]["name"].substr(7)
                    result[c] = {
                      code:      c,
                      id:        i,
                      name:      x[i].name,
                      comment:   x[i].comment,
                      remoteUrl: x[i].remoteUrl,
                      playUrl:   x[i].playUrl,
                      pull:     (x[i].pull == "") ? "SWITCHEDOFF" : x[i].pull,
                      push:     (x[i].push == "") ? "SWITCHEDOFF" : x[i].push,
                      rec:      (x[i].rec  == "") ? "SWITCHEDOFF" : x[i].rec,
                    }
                  }
                    
                  return JSON.stringify(result)
                  
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: 1fa549a49da747a4a8643ac2e6a02bdf
          name: 'Check AVS Monitoring Sys. Free Space'
          type: DEPENDENT
          key: avs.monitoring.sys.freeSpace
          delay: '0'
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.freeSpace
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: f2ee6ba932254730b0b1755b799bde90
          name: 'Check AVS Monitoring Sys. Name'
          type: DEPENDENT
          key: avs.monitoring.sys.name
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - $.name
          master_item:
            key: avs.monitoring.sys
          tags:
            -
              tag: software
              value: avs
        -
          uuid: ddf08b17e56741388417c2baf7fe5c21
          name: 'Get Involved Exam Days'
          type: DEPENDENT
          key: gia.get.involved.exam_days
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[?(@.PPECode==''{$GIA_PPE_CODE}'')]'
            -
              type: JAVASCRIPT
              parameters:
                - |
                  v = JSON.parse(value)
                  const result = {}
                  for (var i in v) {
                    var dat = v[i]["Date"]
                    var aud = v[i]["AudienceCode"]
                    if (!result.hasOwnProperty(dat)) { result[dat] = {"0000": [1,0], "7777": [1, 0]} }
                    result[dat][aud] = [Number(v[i]["Online"]), Number(v[i]["OVZ"])]
                  }
                  return JSON.stringify(result)
          master_item:
            key: gia.get.scheduler
          tags:
            -
              tag: gia
              value: service
        -
          uuid: 344b968c518c4cb9b3b3420205bfce74
          name: 'Get Involved Cams Today'
          type: DEPENDENT
          key: gia.get.involved_cams.today
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var v = JSON.parse(value)
                  var d = new Date()
                  var s = d.getFullYear() + "-" + ("00" + (d.getMonth() + 1)).substr(-2) + "-" + ("00" + d.getDate()).substr(-2)
                  var result = {"value": ""}
                  if (v.hasOwnProperty(s)) {
                    result["value"] = JSON.stringify(v[s])
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_CAM_LIST_TODAY}",
                              ]
                          }
                      },
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result["hostmacroid"] = JSON.parse(response)["result"][0]["hostmacroid"]
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": JSON.parse(value),
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result = result["value"]
                  }
                  
                  return result
          master_item:
            key: gia.get.involved.exam_days
          tags:
            -
              tag: gia
              value: service
        -
          uuid: 9a637738609049e89eb6781b5d3735e4
          name: 'Get Involved Cams Tomorrow'
          type: DEPENDENT
          key: gia.get.involved_cams.tomorrow
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // Get involved cam list tomorrow
                  var v = JSON.parse(value)
                  var d = new Date(new Date().getTime() + 86400000)
                  var s = d.getFullYear() + "-" + ("00" + (d.getMonth() + 1)).substr(-2) + "-" + ("00" + d.getDate()).substr(-2)
                  var result = {"value": ""}
                  if (v.hasOwnProperty(s)) {
                    result["value"] = JSON.stringify(v[s])
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_CAM_LIST_TOMORROW}",
                              ]
                          }
                      },
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result["hostmacroid"] = JSON.parse(response)["result"][0]["hostmacroid"]
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": JSON.parse(value),
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result = result["value"]
                  }
                  
                  return result
          master_item:
            key: gia.get.involved.exam_days
          tags:
            -
              tag: gia
              value: service
        -
          uuid: e1b433b7af0c4dca9390ac713ccef6a3
          name: 'Get Involved Cams Total'
          type: DEPENDENT
          key: gia.get.involved_cams.total
          delay: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            -
              type: JSONPATH
              parameters:
                - '$.[?(@.PPECode==''{$GIA_PPE_CODE}'')]'
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // Create Total involved aud list
                  v = JSON.parse(value)
                  var s = ["0000", "7777"]
                  for (var i in v) {
                    if(s.indexOf(v[i]["AudienceCode"]) >= 0) continue;  
                    s.push(v[i]["AudienceCode"])
                  }
                  
                  var result = {
                    "value": JSON.stringify(s.sort())
                  }
                  return JSON.stringify(result)
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: GET HOST MACRO
                  var result = JSON.parse(value);
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.get",
                      "params":{
                          "output":["hostmacroid", "macro"],
                          "hostids":"{$HOST_ID}",
                          "filter": {
                              "macro": [
                                  "{\$GIA_INVOLVED_CAM_LIST_TOTAL}",
                              ]
                          }
                      },
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result["hostmacroid"] = JSON.parse(response)["result"][0]["hostmacroid"]
                  }
                  
                  return JSON.stringify(result);
            -
              type: JAVASCRIPT
              parameters:
                - |
                  // ZABBIX API: UPDATE HOST MACRO
                  result = JSON.parse(value);
                  if(result.hasOwnProperty("err")) {
                   return JSON.stringify(result);
                  }
                  
                  var request = new HttpRequest();
                  request.addHeader("Content-Type: application/json-rpc");
                  var data = {
                      "jsonrpc":"2.0",
                      "method":"usermacro.update",
                      "params": JSON.parse(value),
                      "auth":"999e778c92f3b4a7a6f23630fe32840aebf77cfd2fa299ae14a9be10870605bd","id":1
                  }
                  
                  var response = request.post("http://11.103.8.101:62929/api_jsonrpc.php", JSON.stringify(data));
                  
                  if (200 != request.getStatus()) {
                    result["err"] = JSON.stringify(response);
                  } else {
                    result = result["value"]
                  }
                  
                  return result
          master_item:
            key: gia.get.scheduler
          tags:
            -
              tag: gia
              value: service
        -
          uuid: ccb0f634854f400f93334cead18bdd12
          name: 'Get Scheduler'
          type: HTTP_AGENT
          key: gia.get.scheduler
          trends: '0'
          value_type: TEXT
          timeout: 5s
          url: 'http://11.103.8.101:8080/api/calendar/all'
          tags:
            -
              tag: gia
              value: service
      discovery_rules:
        -
          uuid: f0f25db4c9f14a8e90f36dce68d53d21
          name: 'AVS. Discovery IP-cam Config'
          type: DEPENDENT
          key: avs.discovery.cam
          delay: '0'
          lifetime: '0'
          item_prototypes:
            -
              uuid: 82e13960c3c24997b75167605479186b
              name: 'AVS IP-Cam "{#AVSCAMCODE}". Pull Status (Stream Local View)'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},pull]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].pull'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: f3a053e6afd34f7eb438124a795980ab
              name: 'AVS IP-Cam "{#AVSCAMCODE}". Push Status (Stream Translation)'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},push]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].push'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: e09d9206428a4a07bcc5276bebb43523
              name: 'AVS IP-Cam "{#AVSCAMCODE}". Rec Status (Stream Recording)'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].rec'
              master_item:
                key: avs.monitoring.sys.cam_dist
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 5f13f9d9fbb64216b659d3f3142a30e4
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Bytes. Dropped'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.byte.drop]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].audio.droppedBytesCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 3ae1beef8a78473f8aef332ae228175f
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Bytes. Sended Delta'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.byte.send.delta]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.byte.send]'
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 4c372b4cc6d0402bbc17697d27d61870
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Bytes. Sended'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.byte.send]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].audio.bytesCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: e84c36231bd842d9bc6ff8ce3fa33632
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Packets. Dropped'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.packet.drop]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].audio.droppedPacketsCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: a56045a20a97461481397713a20b8c55
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Packets. Sended Delta'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.packet.send.delta]'
              delay: '0'
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.packet.send]'
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 58e809097ed64a89b1caf92a033c2b32
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Packets. Sended'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.a.packet.send]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].audio.packetsCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 3d7504e651c3401fa793d09356afbd3f
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Audio Codec'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.acodec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].audio.codec'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
              trigger_prototypes:
                -
                  uuid: 6fe046d4b43147c098df1213818a9dee
                  expression: 'last(/GIA Template. AVS/avs.cam.[{#AVSCAMCODE},rtsp.acodec],#1)="AUNK"'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/GIA Template. AVS/avs.cam.[{#AVSCAMCODE},rtsp.acodec],#1)<>"AUNK"'
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP AUNK'
                  priority: DISASTER
            -
              uuid: b613f2f8df054fc48e80a7c6c9d58beb
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Bytes. Dropped'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.byte.drop]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].video.droppedBytesCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: c8beed3ee2004aa58935666d8df6476f
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Bytes. Sended Delta'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.byte.send.delta]'
              delay: '0'
              units: B
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.byte.send]'
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: d039c54a968a44a592ed106521950cf2
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Bytes. Sended'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.byte.send]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].video.bytesCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 4ff63520e08f4435931737a6bffa284d
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Packets. Dropped'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.packet.drop]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].video.droppedPacketsCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 56e8e727178d40c29da9ab684b377bff
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Packets. Sended Delta'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.packet.send.delta]'
              delay: '0'
              preprocessing:
                -
                  type: SIMPLE_CHANGE
                  parameters:
                    - ''
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.packet.send]'
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 71a2fdbcc9984182a747fb3230e52ac2
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Packets. Sended'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.v.packet.send]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].video.packetsCount'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
            -
              uuid: 9241075c773b40c3bc93d522b9935fb4
              name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP Video Codec'
              type: DEPENDENT
              key: 'avs.cam.[{#AVSCAMCODE},rtsp.vcodec]'
              delay: '0'
              trends: '0'
              value_type: TEXT
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - '$.[''{#AVSCAMCODE}''].video.codec'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: NOSTREAM
              master_item:
                key: avs.monitoring.rtsp.results
              tags:
                -
                  tag: gia
                -
                  tag: software
                  value: avs
              trigger_prototypes:
                -
                  uuid: a554b3f32ef14ce9823c51e9a61cc853
                  expression: 'last(/GIA Template. AVS/avs.cam.[{#AVSCAMCODE},rtsp.vcodec],#1)="VUNK"'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/GIA Template. AVS/avs.cam.[{#AVSCAMCODE},rtsp.vcodec],#1)<>"VUNK"'
                  name: 'AVS IP-Cam "{#AVSCAMCODE}". RTSP VUNK'
                  priority: DISASTER
          master_item:
            key: avs.monitoring.sys.cam_dist
          preprocessing:
            -
              type: JAVASCRIPT
              parameters:
                - |
                  var x = JSON.parse(value);
                  var result = []
                    
                  for (var i in x) {
                    result.push({
                      "{#AVSCAMCODE}": x[i].code
                    })
                  }
                    
                  return JSON.stringify(result)
      tags:
        -
          tag: gia
        -
          tag: software
          value: avs
